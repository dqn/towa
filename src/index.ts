import { readFileSync, writeFileSync } from "fs";

const arr = Buffer.from([
  0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00, 0x01, 0x07, 0x01, 0x60, 0x02,
  0x7f, 0x7f, 0x01, 0x7f, 0x03, 0x02, 0x01, 0x00, 0x07, 0x07, 0x01, 0x03, 0x61,
  0x64, 0x64, 0x00, 0x00, 0x0a, 0x09, 0x01, 0x07, 0x00, 0x20, 0x00, 0x20, 0x01,
  0x6a, 0x0b,
]);

writeFileSync("./src/b.wasm", arr);

const wasmBuffer = readFileSync("./src/b.wasm");

WebAssembly.instantiate(wasmBuffer).then((wasmModule) => {
  // Exported function live under instance.exports
  const { add } = wasmModule.instance.exports;
  const sum = (add as any)(5, 6);
  console.log(sum); // Outputs: 11
});
